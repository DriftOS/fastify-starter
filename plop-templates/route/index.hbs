import { Type } from '@sinclair/typebox';
import type { FastifyPluginAsyncTypebox } from '@fastify/type-provider-typebox';

/**
 * {{pascalCase name}} Routes
 * 
 * Simple route using direct database access.
 * For complex workflows, consider using the Golden Orchestrator pattern.
 * 
 * Generated by: npm run generate
 */
const {{camelCase name}}Routes: FastifyPluginAsyncTypebox = async (fastify) => {
  // Example GET endpoint
  fastify.get(
    '/',
    {
      {{#if requireAuth}}
      preValidation: [fastify.authenticate],
      {{/if}}
      schema: {
        description: 'Get {{camelCase name}}',
        tags: ['{{pascalCase name}}'],
        {{#if requireAuth}}
        security: [{ Bearer: [] }],
        {{/if}}
        response: {
          200: Type.Object({
            success: Type.Literal(true),
            data: Type.Object({
              message: Type.String(),
            }),
          }),
        },
      },
    },
    async (_request, reply) => {
      // TODO: Implement your logic here
      return reply.send({
        success: true,
        data: {
          message: 'Hello from {{pascalCase name}}!',
        },
      });
    }
  );

  // Example POST endpoint
  fastify.post(
    '/',
    {
      {{#if requireAuth}}
      preValidation: [fastify.authenticate],
      {{/if}}
      schema: {
        description: 'Create {{camelCase name}}',
        tags: ['{{pascalCase name}}'],
        {{#if requireAuth}}
        security: [{ Bearer: [] }],
        {{/if}}
        body: Type.Object({
          // TODO: Define your request body
          name: Type.String(),
        }),
        response: {
          201: Type.Object({
            success: Type.Literal(true),
            data: Type.Object({
              id: Type.String(),
              name: Type.String(),
            }),
          }),
        },
      },
    },
    async (request, reply) => {
      // TODO: Implement your creation logic
      // For simple operations, direct Prisma access is fine
      // For complex workflows, use the orchestrator pattern
      
      const { name } = request.body;
      
      // Example response
      return reply.status(201).send({
        success: true,
        data: {
          id: Math.random().toString(36).substr(2, 9),
          name,
        },
      });
    }
  );
};

export default {{camelCase name}}Routes;
