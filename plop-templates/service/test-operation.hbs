import { describe, it, expect } from 'vitest';
import { {{camelCase operation}} } from '@services/{{kebabCase name}}/operations/{{kebabCase operation}}.js';
import type { {{pascalCase name}}PipelineContext } from '@services/{{kebabCase name}}/types/index.js';

/**
 * Unit tests for {{camelCase operation}} operation
 * 
 * Generated by: npm run generate
 */
describe('{{camelCase operation}}', () => {
  it('should process context successfully', async () => {
    const context: {{pascalCase name}}PipelineContext = {
      requestId: 'test-123',
      startTime: Date.now(),
      input: {
        // TODO: Add valid test input
      },
      results: {},
      errors: [],
      metadata: {},
    };

    const result = await {{camelCase operation}}(context);

    expect(result).toBeDefined();
    expect(result.errors).toHaveLength(0);
    // TODO: Add more specific assertions
  });

  it('should handle errors gracefully', async () => {
    const context: {{pascalCase name}}PipelineContext = {
      requestId: 'test-123',
      startTime: Date.now(),
      input: {
        // TODO: Add invalid test input
      },
      results: {},
      errors: [],
      metadata: {},
    };

    const result = await {{camelCase operation}}(context);

    // TODO: Add error handling assertions
    expect(result).toBeDefined();
  });

  it('should skip if previous errors exist', async () => {
    const context: {{pascalCase name}}PipelineContext = {
      requestId: 'test-123',
      startTime: Date.now(),
      input: {
        // TODO: Add test input
      },
      results: {},
      errors: [new Error('Previous error')],
      metadata: {},
    };

    const result = await {{camelCase operation}}(context);

    // Should return context unchanged if errors exist
    expect(result.errors).toHaveLength(1);
    // TODO: Add assertions that operation was skipped
  });
});
